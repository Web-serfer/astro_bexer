---
export async function getStaticPaths() {
  return [
    { params: { path: "sign-in" } },
    { params: { path: "sign-up" } },
    { params: { path: "reset-password" } },
    { params: { path: "forgot-password" } },
    // Добавляем новые роуты для верификации
    { params: { path: "verify-email" } },
    { params: { path: "verification-success" } },
    { params: { path: "verification-expired" } },
  ];
}

// Получаем текущий путь
const { path } = Astro.params;

// Определяем компонент
const AuthComponent = await {
  "sign-in": (await import("../components/auth/SignIn.astro")).default,
  "sign-up": (await import("../components/auth/SignUp.astro")).default,
  "reset-password": (await import("../components/auth/ResetPassword.astro"))
    .default,
  "forgot-password": (await import("../components/auth/ForgotPassword.astro"))
    .default,
  // Добавляем компоненты для верификации
  "verify-email": (await import("../components/auth/VerifyEmail.astro"))
    .default,
  "verification-success": (
    await import("../components/auth/VerificationSuccess.astro")
  ).default,
  "verification-expired": (
    await import("../components/auth/VerificationExpired.astro")
  ).default,
}[path];

// Если маршрут не найден - 404
if (!AuthComponent) {
  return Astro.redirect("/404");
}
---

<!-- Рендерим компонент -->
<AuthComponent />
